<!DOCTYPE html>
<html>
    <head>
        <title>Sää-palvelu</title>
        <meta charset="utf-8"/>
        <link href="css/style.css" rel="stylesheet"/>
        <!--fonts-->
        <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
    </head>
    <body>
        <page>
            <nav>
                <li><a href="index.html">Sääpalvelu</a></li>
            </nav>
            <section>
                <header>Web-ohjelmointi: TTMS0500</header>
                <h2>Harjoitustyö</h2><br>
                <p>Laura Huotari</p>
                <p>Laura Pekkanen</p>
                <p>1.12.2017</p>
            </section>
            <main>
                <h2>Dokumentaatio</h2>
                <article>
                    <h3>Kuvaus</h3>
                    <p>Harjoitustyö on sääpalvelu, joka käyttää avointa dataa Open Weatheristä. Paikkakunnan kirjoittamalla käyttäjä näkee tämän päivän sään, ja painikkeista viiden seuraavan päivän säätiedot. Tiedot ovat oletuksella lähimpänä haku hetken aikaa, esimerkiksi kello 11:00 haettaessa, palvelu näyttää kello 12 sääennusteen.</p>
                    <h3>Toteutus</h3>
                    <p>Projektin rakenne:</p>
                    <img src="css/rakenne2.0.png" alt="rakenne"/>
                    <p>Sovelluksessa käytettiin ulkoisina kirjastoina jQueryä ja moment.js:ää. Suunnitellelimme hakevamme datan Ilmatieteenlaitokselta, mutta se osoittautui liian vaikea lukuiseksi, joten vaihdoimme Open Weatheriin. Sovellus aloitettiin tekemään reactia käyttäen, mutta vaihdoimme jQueryyn, sillä ulkoisen JSON-tiedon hakeminen eri palvelimelta koitui suureksi ongelmaksi. Saimme kuitenkin haettua reactilla tietoa paikallisesta JSON-tiedostosta ajaxilla, toteutuksen näet <a href="index_react.html" style="" ><u>tästä</u></a>. JQueryssä haetaan tietoa getJson-metodilla ja tiedot saadaan suoraan sivustolle urlin kautta. Haetut tiedot saadaan näkyviin haluttuun muotoon append()-metodilla. Kun käyttäjä kirjoittaa haluamansa paikkakunnan, urliin lisätään kyseinen paikkakunta. City-muuttuja hakee paikkakunnan input-kentästä, kun Hae-painiketta painetaan. Päivämäärä haetaan ulkoisesta moment.min.js-tiedostosta ja fi.js:llä saadaan käännettyä ne suomeksi. Kun päivämäärä-paniketta painetaan, empty()-metodi tyhjentää divin aiemmat tiedot ja hakee vasta sitten uudet tiedto. Jos input-kenttä on tyhjä Hae-paniketta painaessa, sivusto antaa ilmoituksen, ettei kenttä voi olla tyhjä.</p>
                    <h3>Ongelmat</h3>
                    <p>Kun aloitimme projektin, käytimme paljon aikaa ilmatieteennlaitoksen datan tutkimiseen, joka ei johtanut mihinkään. Myös react vei liikaa aikaa, kun ilmeni ongelma, ettei dataa saatu haettua render-elementtiin. Reactin käyttö koitui muutenkin hankalaksi, sen vähäisen käyttökokemuksen takia. Emme onnistuneet hakemaan reactilla dataa toiselta palvelimelta, joten seminaarien jälkeen päätimme vaihtaa toteutuksen jQueryyn. Ongelmana jQueryssä on ollut välimuistista poistumattomat tiedot. Ikonien näkyiivn saaminen oli myös ongelmallista, sillä aioimme hakea ikonit muualta kuin OpenWeatheristä. Saimme kuitenkin OpenWeatherin omat ikonit näkyviin pienen viilailun jälkeen. Yritimme saada sivuston hakemaan oletuksena oman sijainnin säätiedot, mutta Google Maps käyttää https:ää ja OpenWeather ei tue https-yhtetyttä, joten luovuimme ajatuksesta yrityksestä huolimatta.</p>
                </article>
                <h2>Resurssit</h2>
                <table>
                  <tr>
                    <th>Tekijä</th>
                    <th>Tehtävä</th>
                    <th>Käytetty aika</th>
                  </tr>
                  <tr>
                    <td>Huotari</td>
                    <td>index.html runko</td>
                    <td>1.5h</td>
                  </tr>
                  <tr>
                    <td>Molemmat</td>
                    <td>GitHub repositio</td>
                    <td>1.5h</td>
                  </tr>
                  <tr>
                    <td>Pekkanen</td>
                    <td>Raportin runkoa</td>
                    <td>1h</td>
                  </tr>
                    <tr>
                    <td>Huotari</td>
                    <td>Ilmatieteenlaitoksen data</td>
                    <td>4h</td>
                  </tr>
                  <tr>
                    <td>Pekkanen</td>
                    <td>OpenWeather API key</td>
                    <td>0.5h</td>
                  </tr>
                    <tr>
                    <td>Molemmat</td>
                    <td>OpenWeather dataan tutustuminen</td>
                    <td>4h</td>
                  </tr>
                    <tr>
                    <td>Molemmat</td>
                    <td>React, ajax + render + initial state</td>
                    <td>10h</td>
                  </tr>
                    <tr>
                    <td>Molemmat</td>
                    <td>jQueryn käyttöönotto</td>
                    <td>4h</td>
                  </tr>
                    <tr>
                    <td>Pekkanen</td>
                    <td>Moment.js</td>
                    <td>3h</td>
                  </tr>
                    <tr>
                    <td>Huotari</td>
                    <td>Datan hakeminen urlista</td>
                    <td>1h</td>
                  </tr>
                    <tr>
                    <td>Pekkanen</td>
                    <td>Kaupungin nollaus haussa</td>
                    <td>2h</td>
                  </tr>
                    <tr>
                    <td>Huotari</td>
                    <td>Error tyhjään hakuun</td>
                    <td>1h</td>
                    </tr>
                    <tr>
                    <td>Pekkanen</td>
                    <td>Google Maps</td>
                    <td>0.5h</td>
                  </tr>
                    <tr>
                    <td>Pekkanen</td>
                    <td>Koodin siistimistä ja kommentoitia</td>
                    <td>1h</td>
                    </tr>
                    <tr>
                    <td>Molemmat</td>
                    <td>Raportti</td>
                    <td>4h</td>
                  </tr>
                    <tr>
                    <td>Pekkanen</td>
                    <td>JSON datan haun korjaus</td>
                    <td>2h</td>
                  </tr>
                    <tr>
                    <td>Pekkanen</td>
                    <td>Aktiiviset nappulat</td>
                    <td>1h</td>
                    </tr>
                    <tr>
                    <td>Huotari</td>
                    <td>Viimeistely</td>
                    <td>2h</td>
                    </tr>
                    <tr>
                    <td><b>Resurssit yhteensä</b></td>
                    <td></td>
                    <td><b>44h</b></td>
                  </tr>
                
                </table>
                
                <h2>Itsearvio</h2>
                <p>Koska käytimme aluksi paljon aikaa toteutuksiin, jotka olivat liian vaikeita saada toimimaan, lopulliseen työhön jäi vähemmän aikaa. Sivusto vastaa harjoitustyön vaatimuksia, mutta siinä olisi voinut käyttää usempaa kurssilla käytettyä tekniikkaa, joka olisi osoittanut lisää osaamista. Arvosanaksi antaisimme molemmille 3.</p>
            </main>
        </page>
    </body>
</html>